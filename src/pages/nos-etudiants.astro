---
import Default from "../layouts/Default.astro";
import CarteEleve from "../components/CarteEleve.astro";
const pageTitle = "Rencontrez nos √©tudiants";
---

<Default title={pageTitle}>
    <h1 class="text-2xl font-bold">Rencontrez nos √©tudiants</h1>
    <p>Ce site n'a pas r√©pondu √† toutes vos questions ? Nos √©tudiants sont √† votre disposition pour vous fournir davantage d'informations sur le CPES et vous partager</p>
    <div class="flex max-sm:justify-center gap-1 w-full mt-2">
        <div id="annee" class="filter" aria-label="Filter Ann√©es">
            <input class="btn filter-reset" type="radio" name="annee" aria-label="X" value="all" checked />
            <input class="w-fit btn bg-yellow-200 border-yellow-300 text-yellow-700" type="radio" name="annee" value="L1" aria-label="L1" />
            <input class="w-fit btn btn-warning" type="radio" name="annee" value="L2" aria-label="L2" />
            <input class="w-fit btn btn-error" type="radio" name="annee" value="L3" aria-label="L3" />
        </div>
        <div id="spe" class="filter" aria-label="Filter Sp√©">
            <input class="btn filter-reset" type="radio" name="spe" aria-label="X" value="all" checked />
            <input class="btn btn-success" type="radio" name="spe" value="sante" aria-label="üß¨ Sant√©" />
            <input class="btn btn-info" type="radio" name="spe" value="socio" aria-label="üìä Soci√©t√©" />
        </div>
    </div>

    <div class="cards grid grid-cols-1 md:grid-cols-3 gap-4 pt-4">
        <CarteEleve nom="Guilhem" photo="https://media.licdn.com/dms/image/v2/D4E03AQHSvRbIQtDNEA/profile-displayphoto-scale_200_200/B4EZnzly4XJgAY-/0/1760728397261?e=1770249600&v=beta&t=HxeX93x7IOUMJFcMwf9blaTuTlXzSomVYbUcpoE-B3U" annee="L1" spe="sante">
            Le contenu de cette carte est √©crit en html; et on peut donc y √©crire <span class="font-bold animate-ping">tout et n'importe quoi</span>...
        </CarteEleve>
        <CarteEleve nom="Lia" photo="https://media.licdn.com/dms/image/v2/D5603AQGRD3Nee2R5ag/profile-displayphoto-shrink_400_400/profile-displayphoto-shrink_400_400/0/1724714534056?e=1770249600&v=beta&t=eAqnM__kCa7hpW9SZGqQH9l9Ym_vCT2xavt0xzDfxaw" annee="L3" spe="sante">
            Les bouttons pour s√©lectionner l'ann√©e et la sp√©cialit√© fonctionnent, testez les !
        </CarteEleve>
    </div>

    <script is:inline>
        const anneeForm = document.getElementById("annee");
        const speForm = document.getElementById("spe");
        const cards = document.querySelectorAll(".cards .card");

        function getSelected(form, name) {
            return form.querySelector(`input[name="${name}"]:checked`)?.value ?? "all";
        }

        function applyFilters() {
            const annee = getSelected(anneeForm, "annee");
            const spe = getSelected(speForm, "spe");

            cards.forEach((card) => {
                const matchesAnnee = annee === "all" || card.dataset.annee === annee;
                const matchesSpe = spe === "all" || card.dataset.spe === spe;
                card.hidden = !(matchesAnnee && matchesSpe);
            });
        }

        [anneeForm, speForm].forEach((form) => {
            form.addEventListener("change", applyFilters);
        });

        applyFilters();
    </script>
</Default>
