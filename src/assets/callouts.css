@layer components {
  /* 1. Base Container Styling */
  div[data-callout] {
    padding: 1rem; /* added fallback */
    border-radius: var(--radius-box, 0.5rem); 
    
    /* Default fallback colors */
    --c-color: var(--color-base-content);
    --c-bg: var(--color-base-200);
    --icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M12 2c5.523 0 10 4.477 10 10a10 10 0 0 1-19.995.324L2 12l.004-.28C2.152 6.327 6.57 2 12 2m0 9h-1l-.117.007a1 1 0 0 0 0 1.986L11 13v3l.007.117a1 1 0 0 0 .876.876L12 17h1l.117-.007a1 1 0 0 0 .876-.876L14 16l-.007-.117a1 1 0 0 0-.764-.857l-.112-.02L13 15v-3l-.007-.117a1 1 0 0 0-.876-.876zm.01-3l-.127.007a1 1 0 0 0 0 1.986L12 10l.127-.007a1 1 0 0 0 0-1.986z'/%3E%3C/svg%3E");
    background-color: var(--c-bg);
  }

  /* 2. The Title */
  div[data-callout-title] {
    font-weight: 600;
    color: var(--c-color);
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
  }

  /* 3. The Icon */
  div[data-callout-title]::before {
    content: '';
    display: inline-block;
    width: 1.25rem;
    height: 1.25rem;
    flex-shrink: 0;
    background-color: var(--c-color);
    background-image: var(--icon);
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    mask-image: var(--icon);
    -webkit-mask-image: var(--icon);
    mask-size: contain;
    -webkit-mask-size: contain;
    mask-repeat: no-repeat;
    mask-position: center;
  }

  /* 4. The Body */
  div[data-callout-body] {
    color: var(--c-color);
    opacity: 0.9;
  }

  /* FIX: Reset margins */
  div[data-callout-body] p { margin: 0 !important; }

  /* =========================================
     THEMES (Using color-mix for opacity)
     ========================================= */
     
  /* Info */
  div[data-callout-type="info"] {
    --c-color: var(--color-info);
    --c-border: var(--color-info);
    --c-bg: color-mix(in srgb, var(--color-info), transparent 90%);
    --icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M12 2c5.523 0 10 4.477 10 10a10 10 0 0 1-19.995.324L2 12l.004-.28C2.152 6.327 6.57 2 12 2m0 9h-1l-.117.007a1 1 0 0 0 0 1.986L11 13v3l.007.117a1 1 0 0 0 .876.876L12 17h1l.117-.007a1 1 0 0 0 .876-.876L14 16l-.007-.117a1 1 0 0 0-.764-.857l-.112-.02L13 15v-3l-.007-.117a1 1 0 0 0-.876-.876zm.01-3l-.127.007a1 1 0 0 0 0 1.986L12 10l.127-.007a1 1 0 0 0 0-1.986z'/%3E%3C/svg%3E");
  }

  /* Note */
  div[data-callout-type="note"] {
    --c-color: var(--color-info);
    --c-border: var(--color-info);
    --c-bg: color-mix(in srgb, var(--color-info), transparent 90%);
    --icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m13 20l7-7m-7 7v-6a1 1 0 0 1 1-1h6V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2z'/%3E%3C/svg%3E");
  }

  /* Tip / Success */
  div[data-callout-type="tip"],
  div[data-callout-type="success"] {
    --c-color: var(--color-success);
    --c-border: var(--color-success);
    --c-bg: color-mix(in srgb, var(--color-success), transparent 90%);
    
    --icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M17 3.34a10 10 0 1 1-14.995 8.984L2 12l.005-.324A10 10 0 0 1 17 3.34m-1.293 5.953a1 1 0 0 0-1.32-.083l-.094.083L11 12.585l-1.293-1.292l-.094-.083a1 1 0 0 0-1.403 1.403l.083.094l2 2l.094.083a1 1 0 0 0 1.226 0l.094-.083l4-4l.083-.094a1 1 0 0 0-.083-1.32'/%3E%3C/svg%3E");
  }

  /* Warning */
  div[data-callout-type="warning"] {
    --c-color: var(--color-warning);
    --c-border: var(--color-warning);
    --c-bg: color-mix(in srgb, var(--color-warning), transparent 90%);
    
    --icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M12 1.67c.955 0 1.845.467 2.39 1.247l.105.16l8.114 13.548a2.914 2.914 0 0 1-2.307 4.363l-.195.008H3.882a2.914 2.914 0 0 1-2.582-4.2l.099-.185l8.11-13.538A2.91 2.91 0 0 1 12 1.67M12.01 15l-.127.007a1 1 0 0 0 0 1.986L12 17l.127-.007a1 1 0 0 0 0-1.986zM12 8a1 1 0 0 0-.993.883L11 9v4l.007.117a1 1 0 0 0 1.986 0L13 13V9l-.007-.117A1 1 0 0 0 12 8'/%3E%3C/svg%3E");
  }

  /* Error / Danger */
  div[data-callout-type="error"],
  div[data-callout-type="danger"] {
    --c-color: var(--color-error);
    --c-border: var(--color-error);
    --c-bg: color-mix(in srgb, var(--color-error), transparent 90%);
    
    --icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M10.425 1.414a3.33 3.33 0 0 1 3.026-.097l.19.097l6.775 3.995l.096.063l.092.077l.107.075a3.22 3.22 0 0 1 1.266 2.188l.018.202l.005.204v7.284c0 1.106-.57 2.129-1.454 2.693l-.17.1l-6.803 4.302c-.918.504-2.019.535-3.004.068l-.196-.1l-6.695-4.237a3.23 3.23 0 0 1-1.671-2.619L2 15.502V8.217c0-1.106.57-2.128 1.476-2.705zM12.01 15l-.127.007a1 1 0 0 0 0 1.986L12 17l.127-.007a1 1 0 0 0 0-1.986zM12 7a1 1 0 0 0-.993.883L11 8v4l.007.117a1 1 0 0 0 1.986 0L13 12V8l-.007-.117A1 1 0 0 0 12 7'/%3E%3C/svg%3E");
  }

  /* Todo / Abstract */
  div[data-callout-type="todo"],
  div[data-callout-type="abstract"] {
    --c-color: var(--color-accent);
    --c-border: var(--color-accent);
    --c-bg: color-mix(in srgb, var(--color-accent), transparent 90%);
    
    --icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M17.997 4.17A3 3 0 0 1 20 7v12a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7a3 3 0 0 1 2.003-2.83A4 4 0 0 0 10 8h4a4 4 0 0 0 3.98-3.597zM15 15H9a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2m0-4H9a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2m-1-9a2 2 0 1 1 0 4h-4a2 2 0 1 1 0-4z'/%3E%3C/svg%3E");
  }

  /* Bug */
  div[data-callout-type="bug"] {
    --c-color: var(--color-secondary);
    --c-border: var(--color-secondary);
    --c-bg: color-mix(in srgb, var(--color-secondary), transparent 90%);
    --icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M12 4a4 4 0 0 1 3.995 3.8L16 8a1 1 0 0 1 .428.096l3.033-1.938a1 1 0 1 1 1.078 1.684l-3.015 1.931A7.2 7.2 0 0 1 18 12h3a1 1 0 0 1 0 2h-3v1a6 6 0 0 1-.195 1.525l2.708 1.616a1 1 0 1 1-1.026 1.718l-2.514-1.501A6 6 0 0 1 13 20.918V15a1 1 0 0 0-2 0v5.917a6 6 0 0 1-3.973-2.56L4.513 19.86a1 1 0 1 1-1.026-1.718l2.708-1.616A6 6 0 0 1 6 15v-1H3a1 1 0 0 1 0-2h3.001v-.055a7 7 0 0 1 .474-2.173l-3.014-1.93a1 1 0 1 1 1.078-1.684l3.032 1.939l.024-.012l.068-.027l.019-.005l.016-.006l.032-.008l.04-.013l.034-.007l.034-.004l.045-.008l.015-.001l.015-.002L8 8a4 4 0 0 1 4-4m0 2a2 2 0 0 0-2 2h4a2 2 0 0 0-2-2'/%3E%3C/svg%3E");
  }

  /* Example */
  div[data-callout-type="example"] {
    --c-color: var(--color-secondary);
    --c-border: var(--color-secondary);
    --c-bg: color-mix(in srgb, var(--color-secondary), transparent 90%);
    --icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M17 20H6a3 3 0 0 1 0-6h11a3 3 0 0 0 0 6h1a3 3 0 0 0 3-3V6a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v8'/%3E%3C/svg%3E");
  }


  /* Question*/ 
  div[data-callout-type="question"] {
    --c-color: var(--color-primary);
    --c-border: var(--color-primary);
    --c-bg: color-mix(in srgb, var(--color-primary), transparent 90%);
    --icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M17 20H6a3 3 0 0 1 0-6h11a3 3 0 0 0 0 6h1a3 3 0 0 0 3-3V6a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v8'/%3E%3C/svg%3E");
  }

  /* Failure/missing/fail */ 
  div[data-callout-type="failure"],
  div[data-callout-type="missing"],
  div[data-callout-type="fail"] {
    --c-color: var(--color-orange-600, var(--color-error));
    --c-border: var(--color-orange-600n, var(--color-error));
    --c-bg: color-mix(in srgb, var(--color-orange-600), transparent 90%);
    --icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M17 20H6a3 3 0 0 1 0-6h11a3 3 0 0 0 0 6h1a3 3 0 0 0 3-3V6a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v8'/%3E%3C/svg%3E");
  }
}